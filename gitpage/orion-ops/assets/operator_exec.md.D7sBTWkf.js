import{_ as e,c as t,o as a,a3 as s}from"./chunks/framework.ColA7jXW.js";const b=JSON.parse('{"title":"执行管理","description":"","frontmatter":{"title":"执行管理"},"headers":[],"relativePath":"operator/exec.md","filePath":"operator/exec.md"}'),n={name:"operator/exec.md"},l=s(`<h3 id="批量执行" tabindex="-1">批量执行 <a class="header-anchor" href="#批量执行" aria-label="Permalink to &quot;批量执行&quot;">​</a></h3><p>批量执行机器命令, 常用于批量执行某些脚本, 如: 批量同步机器时间、批量删除文件等。<br> 相当于一个无界面的伪终端, 可以执行 <code>cd</code> 这种终端命令, 同样的 <code>调度任务</code> <code>应用构建</code> <code>应用发布</code> 命令执行操作都是伪终端。<br> 批量执行的命令可以使用机器环境变量。</p><h3 id="执行记录" tabindex="-1">执行记录 <a class="header-anchor" href="#执行记录" aria-label="Permalink to &quot;执行记录&quot;">​</a></h3><p>可以查看当前用户执行的所有命令记录, <code>管理员</code> 可以查看所有用户的执行记录。</p><p>⚡ 按住 <code>Ctrl</code> 点击 <code>日志</code> 可以打开一个新页面, 否则将会打开一个模态框。</p><h3 id="批量上传" tabindex="-1">批量上传 <a class="header-anchor" href="#批量上传" aria-label="Permalink to &quot;批量上传&quot;">​</a></h3><p>批量上传文件到多台机器, 常用与分发文件以及批量上传 agent 脚本文件。<br> 批量上传提交至传输列表后关闭页面也会在后台继续上传。<br> 如果关闭页面后想查找上传记录, 可以在机器 <code>sftp</code> 的传输列表中查找。</p><h3 id="日志面板" tabindex="-1">日志面板 <a class="header-anchor" href="#日志面板" aria-label="Permalink to &quot;日志面板&quot;">​</a></h3><p>维护机器可查看的日志文件, 采用执行命令的方式查看文件, 灵活度高。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 查看普通日志文件</span></span>
<span class="line"><span>tail -f -n @{offset} &#39;@{file}&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看 k8s 的日志文件</span></span>
<span class="line"><span>kubectl get pods -n dev | awk &#39;{print $1}&#39; | grep @{file} | xargs -I &#39;{}&#39; kubectl logs {} -n dev --tail=@{offset} -f</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 这里甚至可以执行脚本</span></span>
<span class="line"><span>/root/distribution-log.sh</span></span></code></pre></div><p>这里只有两个可替换的变量, 当然这里也是可以写死的</p><table><thead><tr><th style="text-align:left;">key</th><th style="text-align:left;">示例</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">offset</td><td style="text-align:left;">500</td><td style="text-align:left;">偏移量(行)</td></tr><tr><td style="text-align:left;">file</td><td style="text-align:left;">/data/info.log</td><td style="text-align:left;">机器名称</td></tr></tbody></table><p>⚡ 按住 <code>Ctrl</code> 点击 <code>打开</code> 可以打开一个新页面, 否则将会打开一个模态框。</p><ul><li>清除ANSI: 可以清除下载的日志文件中的着色码, 如执行日志, 构建日志</li><li>上传: 上传本地文件文件, 一般用于查看着色的日志文件</li><li>添加: 添加宿主机或远程机器日志文件</li></ul>`,14),o=[l];function d(i,p,c,r,h,f){return a(),t("div",null,o)}const g=e(n,[["render",d]]);export{b as __pageData,g as default};
