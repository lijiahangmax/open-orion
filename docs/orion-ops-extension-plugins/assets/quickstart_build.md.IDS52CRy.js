import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.Cq7A5ZjR.js";const u=JSON.parse('{"title":"构建","description":"","frontmatter":{"title":"构建"},"headers":[],"relativePath":"quickstart/build.md","filePath":"quickstart/build.md"}'),n={name:"quickstart/build.md"},t=e(`<h3 id="所需环境" tabindex="-1">所需环境 <a class="header-anchor" href="#所需环境" aria-label="Permalink to &quot;所需环境&quot;">​</a></h3><ul><li>jdk 1.8</li><li>maven 3.5.4(+)</li></ul><h3 id="拉取代码" tabindex="-1">拉取代码 <a class="header-anchor" href="#拉取代码" aria-label="Permalink to &quot;拉取代码&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># github</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/lijiahangmax/orion-ops-extension-plugins</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gitee</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gitee.com/lijiahangmax/orion-ops-extension-plugins</span></span></code></pre></div><h3 id="修改配置" tabindex="-1">修改配置 <a class="header-anchor" href="#修改配置" aria-label="Permalink to &quot;修改配置&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>配置文件路径: </span></span>
<span class="line"><span>orion-ops-extension-plugins/orion-ops-plugins-parent/machine-monitor-agent/src/main/resources/application-prod.properties</span></span>
<span class="line"><span></span></span>
<span class="line"><span>collect.period.second     是数据采集周期, 默认30s, 建议不动</span></span>
<span class="line"><span>agent.access.secret       是对外暴露服务的请求密钥, 建议修改 修改后需要与 orion-ops-api 配置中的 machine.monitor.default.access.token 保持一致</span></span>
<span class="line"><span>orion.ops.access.host     是 orion-ops 暴露服务的请求路径, 确保地址正确否则将无法进行报警通知  </span></span>
<span class="line"><span>orion.ops.access.secret   是 orion-ops 暴露服务的请求密钥, 必须和 orion-ops-api 配置中的 expose.api.access.secret 保持一致</span></span></code></pre></div><h3 id="构建-jar-包" tabindex="-1">构建 jar 包 <a class="header-anchor" href="#构建-jar-包" aria-label="Permalink to &quot;构建 jar 包&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入代码目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> orion-ops-extension-plugins/orion-ops-plugins-parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">maven</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -DskipTests</span></span></code></pre></div><h3 id="配置插件包" tabindex="-1">配置插件包 <a class="header-anchor" href="#配置插件包" aria-label="Permalink to &quot;配置插件包&quot;">​</a></h3><ol><li><p>将构建的包复制到部署 orion-ops 的机器中 将 <code>machine-monitor-agent/target/machine-monitor-agent.jar</code> 复制到部署 <code>orion-ops</code> 的机器中 如: <code>/root/lib/machine-monitor-agent-latest.jar</code></p></li><li><p>修改 orion-ops 系统配置<br> 访问 <code>orion-ops</code> &gt; <code>系统管理</code> &gt; <code>系统变量</code><br> 修改环境变量 <code>machine_monitor_agent_path</code> 为 第一步操作的绝对路径</p></li></ol><h3 id="安装插件包" tabindex="-1">安装插件包 <a class="header-anchor" href="#安装插件包" aria-label="Permalink to &quot;安装插件包&quot;">​</a></h3><p>访问 <code>orion-ops</code> &gt; <code>机器管理</code> &gt; <code>机器监控</code><br> 如果修改了配置 <code>agent.access.secret</code> 点击插件配置修改 <code>accessToken</code> 后点击 <code>安装</code> 即可</p>`,12),o=[t];function l(p,c,h,r,d,k){return i(),a("div",null,o)}const m=s(n,[["render",l]]);export{u as __pageData,m as default};
