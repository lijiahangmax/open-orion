import{_ as a,c as e,o as s,a3 as t}from"./chunks/framework.ColA7jXW.js";const g=JSON.parse('{"title":"常见问题","description":"","frontmatter":{"title":"常见问题"},"headers":[],"relativePath":"support/faq.md","filePath":"support/faq.md"}'),n={name:"support/faq.md"},i=t(`<h3 id="日志文件在哪" tabindex="-1">日志文件在哪? <a class="header-anchor" href="#日志文件在哪" aria-label="Permalink to &quot;日志文件在哪?&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 宿主机</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/orion-ops-space/docker-volumes/root/orion/logs/orion-ops/orion-ops.log</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 容器内</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/orion/logs/orion-ops/orion-ops.log</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 滚动日志 .../logs/orion-ops/rolling/*</span></span></code></pre></div><h3 id="忘记了默认管理员密码无法登陆怎么办" tabindex="-1">忘记了默认管理员密码无法登陆怎么办? <a class="header-anchor" href="#忘记了默认管理员密码无法登陆怎么办" aria-label="Permalink to &quot;忘记了默认管理员密码无法登陆怎么办?&quot;">​</a></h3><p>重启后端服务 添加启动参数 <code>--reset-admin</code> 会将 <code>orionadmin</code> 的密码重置为 <code>orionadmin</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>nohup java -jar app.jar --spring.profiles.active=prod --reset-admin &amp;</span></span></code></pre></div><h3 id="开启了ip黑白名单-无法访问系统了怎么办" tabindex="-1">开启了IP黑白名单, 无法访问系统了怎么办? <a class="header-anchor" href="#开启了ip黑白名单-无法访问系统了怎么办" aria-label="Permalink to &quot;开启了IP黑白名单, 无法访问系统了怎么办?&quot;">​</a></h3><p>重启后端服务 添加启动参数 <code>--disable-ip-filter</code> 会将禁用ip过滤器</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>nohup java -jar app.jar --spring.profiles.active=prod --disable-ip-filter &amp;</span></span></code></pre></div><h3 id="数据误删除怎么办" tabindex="-1">数据误删除怎么办? <a class="header-anchor" href="#数据误删除怎么办" aria-label="Permalink to &quot;数据误删除怎么办?&quot;">​</a></h3><p>数据库的数据都采用了逻辑删除, 可以将已删除的数据中的 <code>deleted</code> 字段改为 <code>1</code><br> 如果不知道数据是哪一条, 可以查询用户操作日志, 点击 <code>参数</code> 寻找操作的id</p><h3 id="如何开启演示模式" tabindex="-1">如何开启演示模式? <a class="header-anchor" href="#如何开启演示模式" aria-label="Permalink to &quot;如何开启演示模式?&quot;">​</a></h3><p>后端修改配置 <code>demo.mode=true</code> 或者修改 <code>docker-compose.yml</code> <code>DEMO_MODE=true</code><br> 前端修改配置 <code>VUE_APP_DEMO_MODE=true</code> 或者直接执行 <code>npm run build:demo</code></p><h3 id="可以将宿主机-ip-修改为其他远程机器吗" tabindex="-1">可以将宿主机 IP 修改为其他远程机器吗? <a class="header-anchor" href="#可以将宿主机-ip-修改为其他远程机器吗" aria-label="Permalink to &quot;可以将宿主机 IP 修改为其他远程机器吗?&quot;">​</a></h3><p>CI 功能底层暂时不支持, 如果不使用 CI 功能则可以修改<br> ⚡ 不推荐这么做, 设计的初衷是宿主机就是部署 orion-ops 机器, 用来做数据存储以及数据交换</p><h3 id="orion-ops-可以实现异地构建吗" tabindex="-1">orion-ops 可以实现异地构建吗? <a class="header-anchor" href="#orion-ops-可以实现异地构建吗" aria-label="Permalink to &quot;orion-ops 可以实现异地构建吗?&quot;">​</a></h3><p>暂时不支持</p><h3 id="为什么-sftp-无法上传特大文件" tabindex="-1">为什么 SFTP 无法上传特大文件? <a class="header-anchor" href="#为什么-sftp-无法上传特大文件" aria-label="Permalink to &quot;为什么 SFTP 无法上传特大文件?&quot;">​</a></h3><p>考虑到系统性能和内存占用 默认限制单次上传最大阈值为 512MB</p><ol><li>修改 application.properties 中的 <code>spring.servlet.multipart.max-file-size</code> 为合适的值 (默认2048MB)</li><li>修改 系统管理 &gt; 系统设置 &gt; 其他设置 <code>上传文件最大阈值</code> 为合适的值 (默认512MB)</li><li>如果使用 nginx 代理后端接口, 修改 nginx 请求限制 <code>client_max_body_size</code> 为合适的值</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>server {</span></span>
<span class="line"><span>  listen 80;</span></span>
<span class="line"><span>  client_max_body_size 1024m;</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>⛔ 不建议上传特别大的文件, 可能会出现 <code>OOM</code></p><h3 id="应用构建时提示-版本控制仓库操作执行失败" tabindex="-1">应用构建时提示 &#39;版本控制仓库操作执行失败&#39;? <a class="header-anchor" href="#应用构建时提示-版本控制仓库操作执行失败" aria-label="Permalink to &quot;应用构建时提示 &#39;版本控制仓库操作执行失败&#39;?&quot;">​</a></h3><p>应用管理 &gt; 版本仓库 找到应用关联的仓库, 检查密码/私人令牌后 重新初始化即可</p><h3 id="orion-ops-是否支持-windows-部署" tabindex="-1">orion-ops 是否支持 Windows 部署? <a class="header-anchor" href="#orion-ops-是否支持-windows-部署" aria-label="Permalink to &quot;orion-ops 是否支持 Windows 部署?&quot;">​</a></h3><p>可以支持, 前提是 Windows 安装了 OpenSSH Server<br> 但是不建议, 因为 Windows 的 ssh 命令兼容性不好, 一切需要执行ssh命令的地方都不友好<br> 如: 批量执行, 应用构建发布, 调度任务兼容性非常不友好</p><h3 id="orion-ops-是否支持-svn-作为版本仓库" tabindex="-1">orion-ops 是否支持 svn 作为版本仓库? <a class="header-anchor" href="#orion-ops-是否支持-svn-作为版本仓库" aria-label="Permalink to &quot;orion-ops 是否支持 svn 作为版本仓库?&quot;">​</a></h3><p>仅支持 git, 但是构建时可以执行 svn 命令</p><h3 id="如果构建不会生成产物-怎么防止构建失败" tabindex="-1">如果构建不会生成产物, 怎么防止构建失败? <a class="header-anchor" href="#如果构建不会生成产物-怎么防止构建失败" aria-label="Permalink to &quot;如果构建不会生成产物, 怎么防止构建失败?&quot;">​</a></h3><p>将构建产物路径设置为一个已存在的文件的绝对路径即可</p><h3 id="如果应用没有构建操作-该如何执行发布操作" tabindex="-1">如果应用没有构建操作, 该如何执行发布操作? <a class="header-anchor" href="#如果应用没有构建操作-该如何执行发布操作" aria-label="Permalink to &quot;如果应用没有构建操作, 该如何执行发布操作?&quot;">​</a></h3><p><code>同上问题</code> 将构建产物路径设置为一个已存在的文件的绝对路径, 构建操作随便设置一个命令即可, 如: echo 1</p><h3 id="为什么会找不到环境变量" tabindex="-1">为什么会找不到环境变量? <a class="header-anchor" href="#为什么会找不到环境变量" aria-label="Permalink to &quot;为什么会找不到环境变量?&quot;">​</a></h3><p>可以在执行命令的第一行设置 <code>source /etc/profile</code> 来加载环境变量</p><h3 id="nohup-为什么无法启动程序" tabindex="-1">nohup 为什么无法启动程序? <a class="header-anchor" href="#nohup-为什么无法启动程序" aria-label="Permalink to &quot;nohup 为什么无法启动程序?&quot;">​</a></h3><p>执行命令行使用的伪终端关闭时会停止终端进程, 可以使用 sleep 来跳过<br><code>(nohup java -jar springboot-0.0.1-SNAPSHOT.jar &gt;&gt; run.log 2&gt;&amp;1 &amp;) &amp;&amp; sleep 1</code></p><h3 id="命令中途执行失败如何设置中断执行" tabindex="-1">命令中途执行失败如何设置中断执行? <a class="header-anchor" href="#命令中途执行失败如何设置中断执行" aria-label="Permalink to &quot;命令中途执行失败如何设置中断执行?&quot;">​</a></h3><p>可以在执行命令的第一行设置 <code>set -e</code><br> 作用是: 当执行出现意料之外的情况时, 立即退出</p><h3 id="在调度任务、应用构建、应用发布-命令执行成功的依据是什么" tabindex="-1">在调度任务、应用构建、应用发布 命令执行成功的依据是什么? <a class="header-anchor" href="#在调度任务、应用构建、应用发布-命令执行成功的依据是什么" aria-label="Permalink to &quot;在调度任务、应用构建、应用发布 命令执行成功的依据是什么?&quot;">​</a></h3><p>是获取命令的 <code>exitcode</code> 判断是否为 <code>0</code> 如果非0则代表命令执行失败<br> 同理, 在命令的最后一行设置 <code>exit 1</code> 结果将会是失败, 可以用此来中断后续流程</p><h3 id="为什么使用密钥认证还是无法连接机器" tabindex="-1">为什么使用密钥认证还是无法连接机器? <a class="header-anchor" href="#为什么使用密钥认证还是无法连接机器" aria-label="Permalink to &quot;为什么使用密钥认证还是无法连接机器?&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 升级 openssh</span></span>
<span class="line"><span>yum update openssh</span></span>
<span class="line"><span>sshd -v (我的版本: OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017)</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 生成密钥时添加参数 -m PEM</span></span>
<span class="line"><span>ssh-keygen -t rsa -m PEM</span></span>
<span class="line"><span>chmod 700  ~/.ssh</span></span>
<span class="line"><span>chmod 700  ~/.ssh/authorized_keys </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 修改 sshd 配置 /etc/ssh/sshd_config</span></span>
<span class="line"><span>PubkeyAuthentication yes</span></span>
<span class="line"><span>RSAAuthentication yes</span></span>
<span class="line"><span>AuthorizedKeysFile .ssh/authorized_keys</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 重启 sshd 服务</span></span>
<span class="line"><span>service sshd restart</span></span></code></pre></div><h3 id="应用发布中选择-scp-作为传输方式-为什么还需要手动输入密码" tabindex="-1">应用发布中选择 SCP 作为传输方式, 为什么还需要手动输入密码? <a class="header-anchor" href="#应用发布中选择-scp-作为传输方式-为什么还需要手动输入密码" aria-label="Permalink to &quot;应用发布中选择 SCP 作为传输方式, 为什么还需要手动输入密码?&quot;">​</a></h3><p>需要配置宿主机与目标机器的 ssh 免密登陆, 配置好后就无需输入密码了</p><h3 id="下载的日志中为什么会有这么多乱码-如-x1b-0m" tabindex="-1">下载的日志中为什么会有这么多乱码 如: \\x1b[0m? <a class="header-anchor" href="#下载的日志中为什么会有这么多乱码-如-x1b-0m" aria-label="Permalink to &quot;下载的日志中为什么会有这么多乱码 如: \\x1b[0m?&quot;">​</a></h3><p>这是 ANSI 码, 用于日志展示中的着色<br> 系统提供了批量清除的功能, 在 <code>执行管理</code> &gt; <code>日志面板</code> &gt; <code>清除ANSI</code></p><h3 id="执行命令时-可以用哪些环境变量" tabindex="-1">执行命令时 可以用哪些环境变量? <a class="header-anchor" href="#执行命令时-可以用哪些环境变量" aria-label="Permalink to &quot;执行命令时 可以用哪些环境变量?&quot;">​</a></h3><table><thead><tr><th style="text-align:left;">环境变量</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>@{app.xxx}</code></td><td style="text-align:left;">应用信息以及应用环境变量</td></tr><tr><td style="text-align:left;"><code>@{machine.xxx}</code></td><td style="text-align:left;">机器信息以及机器环境变量</td></tr><tr><td style="text-align:left;"><code>@{system.xxx}</code></td><td style="text-align:left;">系统环境变量</td></tr><tr><td style="text-align:left;"><code>@{build.xxx}</code></td><td style="text-align:left;">应用构建业务上下文</td></tr><tr><td style="text-align:left;"><code>@{release.xxx}</code></td><td style="text-align:left;">应用发布业务上下文</td></tr></tbody></table><table><thead><tr><th style="text-align:left;">业务场景</th><th style="text-align:left;">可用变量</th></tr></thead><tbody><tr><td style="text-align:left;">批量执行</td><td style="text-align:left;"><code>machine</code> <code>system</code></td></tr><tr><td style="text-align:left;">定时任务</td><td style="text-align:left;"><code>machine</code> <code>system</code></td></tr><tr><td style="text-align:left;">构建配置</td><td style="text-align:left;"><code>build</code> <code>app</code> <code>machine</code> <code>system</code></td></tr><tr><td style="text-align:left;">发布配置</td><td style="text-align:left;"><code>release</code> <code>app</code> <code>machine</code> <code>system</code></td></tr></tbody></table>`,48),o=[i];function l(p,d,r,c,h,u){return s(),e("div",null,o)}const k=a(n,[["render",l]]);export{g as __pageData,k as default};
